<div class="section">
  <div class="container">
    <h1 class="title">New ingredient</h1>
    <br>

    <div *ngIf="ready; else noForm">
    <div>
      <form [formGroup]="form" (ngSubmit)="submit(form.value)" id="{{className}}Form">
        <!-- Name input field -->
        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label">Name</label>
          </div>
          <div class="field-body">
            <div class="field">
              <p class="control">
                <input class="input" type="text" placeholder="Name" formControlName="name" required>
              </p>
            </div>
          </div>
        </div>

        <!-- Rating input field -->
        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label">Rating</label>
          </div>
          <div class="field-body">
            <div class="field">
              <p class="control">
                <input class="input" type="number" placeholder="Rating" formControlName="rating" required>
              </p>
            </div>
          </div>
        </div>

        <!-- Vegetable checkbox -->
        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label">Vegetable</label>
          </div>
          <div class="field-body">
            <div class="field">
              <p class="control">
                <label class="checkbox is-normal">
                  <input type="checkbox" formControlName="is_vegetable">
                  This ingredient is a vegetable.
                </label>
              </p>
            </div>
          </div>
        </div>

        <!-- Base ingredient select -->
        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label">Specification of</label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                <div class="select is-fullwidth">
                  <select id="baseIngredientSelect" formControlName="base_ingredient_id">
                    <option *ngFor="let ingredient of ingredients" [value]="ingredient.id">{{ingredient.name}}</option>
                  </select>
                </div>
                <div>
                  <a href="#" (click)="clearSelected()">Clear</a>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Error message -->
        <div *ngIf="errorMessage">
          <div class="field is-horizontal">
            <div class="field-label is-normal">
              <label class="label"></label>
            </div>
            <div class="field-body">
              <div class="field">
                <h6 class="title is-6" style="color: #da3030">{{errorMessage}}</h6>
              </div>
            </div>
          </div>
        </div>

        <!-- Success message -->
        <div *ngIf="successMessage">
          <div class="field is-horizontal">
            <div class="field-label is-normal">
              <label class="label"></label>
            </div>
            <div class="field-body">
              <div class="field">
                <h6 class="title is-6" style="color: green">{{successMessage}}</h6>
              </div>
            </div>
          </div>
        </div>

        <!-- Submit button -->
        <button class="button is-primary is-pulled-right" type="submit">Submit</button>
      </form>
    </div>
    </div>
    <ng-template #noForm>
      <div *ngIf="errorMessage; else loading">
        {{errorMessage}}
      </div>
      <ng-template #loading>
        <app-load-spinner></app-load-spinner>
      </ng-template>
    </ng-template>
  </div>
</div>
